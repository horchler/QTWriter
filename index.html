<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>QTWriter - Export QuickTime Movies with Matlab</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>QTWriter</h1>
        <p>Export QuickTime Movies with Matlab</p>
        <h6>Version 1.1, 6-9-12</h6>
        <p class="view"><a href="https://github.com/horchler/QTWriter">View the Project on GitHub <small>horchler/QTWriter</small></a></p>
        <ul>
          <li><a href="https://github.com/horchler/QTWriter/blob/master/QTWriter/QTWriter.m">View <strong>M-File</strong></a></li>
          <li><a href="https://github.com/horchler/QTWriter/raw/master/QTWriter.zip">Download <strong>ZIP Archive</strong></a></li>
          <li><a href="https://github.com/horchler/QTWriter/zipball/master">Download <strong>Repository</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>QTWriter</h1>
        <h2>Export QuickTime Movies with Matlab</h2>

<p><code><a href="https://github.com/horchler/QTWriter/blob/master/QTWriter/QTWriter.m">OBJ = QTWriter(FILENAME)</a></code> constructs a QTWriter object to write QuickTime movie data to a '.mov' file using lossless Photo PNG compression. <code>FILENAME</code> is a string enclosed in single quotation marks that specifies the name of the file to create. If <code>FILENAME</code> does not include an extension the QTWriter constructor appends the '.mov' extension. <code>FILENAME</code> can include an absolute or relative path.</p>

<p><code>OBJ = QTWriter(...,'PropertyName','PropertyValue',...)</code> specifies options via property name-value pairs. In addition to the default <code>'Photo PNG'</code> compression, <code>'Photo TIFF'</code> and <code>'Photo JPEG'</code> formats can be specified via the <code>'MovieFormat'</code> property. Lossless Photo TIFF compression yields larger file sizes than Photo PNG, but is faster (using <code>'LZW'</code> or the default <code>'PackBits'</code> <code>'CompressionType'</code>). Photo JPEG is a lossy format and the <code>'Quality'</code> property can be used to specify the level of compression to use. The <code>'ColorSpace'</code> property specifies if the movie is to be output as 24-bit RGB truecolor or 8-bit grayscale. The <code>'Transparency'</code> property indicates if the movie is to be output with an alpha channel (Photo PNG format only).</p>

<p>Frames are written via the <code><a href="https://github.com/horchler/QTWriter/blob/master/QTWriter/QTWriter.m#L372-442">writeMovie(FRAME)</a></code> method of the QTWriter object. The frame rate of the movie can be continuously varied via the <code>'FrameRate'</code> property of the QTWriter object (see <code><a href="https://github.com/horchler/QTWriter/blob/master/strpenddemo.m">STRPENDDEMO</a></code>). The looping behavior of the output movie can be specified via the 'Loop' property of the QTWriter object: <code>'none'</code>, <code>'loop'</code>, or <code>'backandforth'</code>. Finally, the output movie can be forced to play every frame via the <code>'PlayAllFrames'</code> property of the QTWriter object. The <code><a href="https://github.com/horchler/QTWriter/blob/master/QTWriter/QTWriter.m#L306-353">close()</a></code> method of the QTWriter object is called to finish writing the movie and clean up associated data.</p>

<h3>Example:</h3>
<div class="highlight">
<pre>
<span style="color:forestgreen">% Prepare new movie file using the default PNG compression</span>
movObj = QTWriter(<span style="color:#A020F0">'peaks.mov'</span>);

<span style="color:forestgreen">% Create an animation</span>
hf = figure; Z = peaks; surfc(Z); frames = 100;
axis tight; set(hf,<span style="color:#A020F0">'DoubleBuffer'</span>,<span style="color:#A020F0">'on'</span>);
set(gca,<span style="color:#A020F0">'nextplot'</span>,<span style="color:#A020F0">'replacechildren'</span>);
     
<span style="color:forestgreen">% Animate plot and write movie</span>
<span style="color:blue">for</span> k = 0:frames
    hs = surfc(sin(2*pi*k/frames)*Z,Z);
    set(hs,<span style="color:#A020F0">'FaceColor'</span>,<span style="color:#A020F0">'interp'</span>,<span style="color:#A020F0">'FaceLighting'</span>,<span style="color:#A020F0">'phong'</span>);
    light(<span style="color:#A020F0">'Position'</span>,[0 0 4]);
    
    <span style="color:forestgreen">% Vary the frame-rate</span>
    movObj.FrameRate = k;
    
    <span style="color:forestgreen">% Write each frame to the file</span>
    writeMovie(movObj,getframe(hf));
<span style="color:blue">end</span>

<span style="color:forestgreen">% Set palindromic looping flag</span>
movObj.Loop = <span style="color:#A020F0">'backandforth'</span>;

<span style="color:forestgreen">% Finish writing movie and close file</span>
close(movObj);
</pre>
</div>

<p>Example output:</p>
<embed src="https://github.com/horchler/QTWriter/raw/master/peaks.mov" width="560" height="436" autoplay="false" controller="true" loop="palindrome" playeveryframe="false" pluginspace="http://www.apple.com/quicktime/">
<div><small>(<a href="https://github.com/horchler/QTWriter/raw/master/peaks.mov">Download Movie</a>, 5.1 MB QuickTime)</small></div><br>

<p>The included demo, <code><a href="https://github.com/horchler/QTWriter/blob/master/strpenddemo.m">STRPENDDEMO</a></code>, provides a more-detailed usage example. The M-file simulates and animates a string pendulum hanging between two cylinders and generates this variable frame-rate movie using QTWriter:</p>
<span style="margin-left:97px"><embed src="https://github.com/horchler/QTWriter/raw/master/strpenddemo.mov" width="366" height="360" autoplay="false" controller="true" loop="true" playeveryframe="false" pluginspace="http://www.apple.com/quicktime/"></span><br>
<div style="margin-left:97px"><small>(<a href="https://github.com/horchler/QTWriter/raw/master/strpenddemo.mov">Download Movie</a>, 1.5 MB QuickTime)</small></div><br>
<br>
<hr>

<p>Copyright Â© Andrew D. Horchler, <i>adh9 @ case . edu</i><br>
Created: 10-3-11, Revision: 1.1, 6-9-12<br>
CC BY-SA, <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike License</a></p>

<p>QTWriter is inspired by <code><a href="https://engineering.purdue.edu/%7Emalcolm/interval/1999-066/">MakeQTMovie</a></code> by Malcolm Slaney (Interval Research, March 1999) and parts are based on the <code><a href="http://www.mathworks.com/help/techdoc/ref/videowriterclass.html">VideoWriter</a></code> class in Matlab R2011b.</p>

<p>This version tested with Matlab 7.14.0.739 (R2012a)<br>
Mac OS X 10.6.8 Build: 10K549, Java 1.6.0_31-b04-415-10M3635<br>
QuickTime Player Pro 7.6.6 (1709) Version 1790, QuickTime Player X 10.0 (131)<br>
Compatibility maintained back through Matlab 7.4 (R2007a)</p>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/horchler">Andrew Horchler</a><br>
        <small>QTWriter is under active development. Submit any bugs or suggestions to <i>adh9 @ case . edu</i>. Or <a href="https://github.com/horchler/QTWriter/fork">fork it</a> on GitHub.</small></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>